<div class="content" id="resilience" style="padding-top: 50px;">

    <h2 class="section-heading" style="padding:0px; margin: 150px 0px 5px 0px; text-transform: none">Current Fab Cities</h2>
    <p>
        Choose one of the current Fab Cities.
    </p>

    <div id="fabcities_list" class="btn-group" role="group" aria-label="...">
    </div>

    <div id="wholeviz" style="display: none; border: 2px solid blue;">

        <h2 class="city-title" id="title"></h2>

        <h3 class="country-title text-muted">
        <span id="city">City</span> / <span id="region">Region</span> / <span id="country">Country</span></h3>

        <p id="description">
        </p>

        <div id="content">
        </div>

        <!-- City resilience map -->
        <h3>The resilience of the Fab City</h3>

        <div id="map_res" style="height: 480px;">
        </div>

        <!-- City resilience index -->
        <!--{% include 'modules/cities/mod_city_infos.html' %}
-->
        <!-- City labs map -->
        <h3>The laboratories of the Fab City</h3>

        <div id="map_labs" style="height: 480px;">
        </div>

        <h3>Projects</h3>
        <p>
            list of projects from lab
        </p>

    </div>

    <script>
        // Initially hide the whole city visualization with JQuery
        $("#wholeviz").hide();

        // The visualization
        d3.json("api/cities", function(data) {

            var button_group = d3.select('#fabcities_list');
            var viz = d3.select('#wholeviz');
            var title = d3.select('#title');
            var city = d3.select('#city');
            var region = d3.select('#region');
            var country = d3.select('#country');
            var description = d3.select('#description');
            var content = d3.select('#content');

            button_group.selectAll('div')
                .data(data)
                .enter()
                .append('button')
                .attr("class", "btn btn-default")
                .attr("type", "button")
                .attr("aria-label", function(d) {
                    return d["name"];
                })
                .html(function(d) {
                    return d["name"];
                })
                .on("click", function(d) {
                    console.log(d);
                    $("#wholeviz").show();
                    labs_map(d);
                });

        });
    </script>

</div>
